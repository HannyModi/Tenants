{% extends 'admin/Base.html' %}
{% load staticfiles %}
{% block titleblock %}
Admin/Home
{% endblock %}
{% block bodyblock %}
<section id="inner-headline">
    <div class="container">
        <div class="row">
            <div class="span12">
                <div class="inner-heading">
                    <ul class="breadcrumb">
                        <li><a href="{% url 'agent_index' %}"><i class="icon-home"></i> Home</a> 
                    </ul>
                    <h2>Home</h2>
                </div>
            </div>
        </div>
    </div>
</section>

<section>
    <div class="container">
        <div class="row">
            <div class="span12">
                <div id="container"></div>
                    <script src="{% static "js/custom/highcharts.js" %}"></script>
                        <script>
                            Highcharts.chart('container', {
                                chart: {
                                    type: 'column'
                                },
                                title: {
                                    text: 'Property Details'
                                },
                                xAxis: {
                                    categories: [
                                        {% for entry in msp_list %}'{{ entry.msp_name }}, <br/> {{entry.msp_address}}'{% if not forloop.last %}, {% endif %}{% endfor %}
                                    ]
                                },
                                series: [{
                                    name: 'Allocated Properties',
                                    data: [
                                        {% for entry in msp_list %}{{ entry.allocated_properties }}{% if not forloop.last %}, {% endif %}{% endfor %}
                                    ],
                                    color: 'green'
                                }, {
                                    name: 'Unallocated Properties',
                                    data: [
                                        {% for entry in msp_list %}{{ entry.unallocated_properties }}{% if not forloop.last %}, {% endif %}{% endfor %}
                                    ],
                                    color:'orange'
                                }]
                            });
                        </script>
            </div>    
        </div>
        <div class="row">
            <div id="monthlyrent">
                <script>
                    Highcharts.chart('monthlyrent', {
                                title: {
                                    text: 'Rent Collection'
                                },
                                xAxis: {
                                    categories: [{%for data in rent %}'{{ data.month|date:"F, Y" }}',{% endfor %}]
                                },
                                yAxis: {
                                    title: {
                                        text: 'Rupees Collected'
                                    }
                                },
                                 plotOptions: {
                                        line: {
                                            dataLabels: {
                                                enabled: true
                                            },
                                            enableMouseTracking: false
                                        }
                                    },

                                legend: {
                                    layout: 'vertical',
                                    align: 'right',
                                    verticalAlign: 'middle'
                                },

                                

                                series: [
                                    {% for data in rent %}
                                    {
                                    name: '{{data.msp}}',
                                    data: '{{data.month|date:"F, Y"}}'
                                    },
                                    {% endfor %}
                                ],

                                responsive: {
                                    rules: [{
                                        condition: {
                                            maxWidth: 500
                                        },
                                        chartOptions: {
                                            legend: {
                                                layout: 'horizontal',
                                                align: 'center',
                                                verticalAlign: 'bottom'
                                            }
                                        }
                                    }]
                                }

                            });
                </script>

            </div>
        </div>
    </div>
</section>

{% endblock %}